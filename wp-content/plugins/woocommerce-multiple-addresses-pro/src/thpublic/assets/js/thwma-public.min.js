function thwma_show_billing_popup(e){thwma_address.show_billing_popup(e)}function thwma_show_shipping_popup(e){thwma_address.show_shipping_popup(e)}function thwma_populate_selected_address(e,elm,type,key){e.preventDefault(),thwma_address.populate_selected_address(elm,type,key)}function thwma_add_new_address(e,elm,type){e.preventDefault(),thwma_address.add_new_address(elm,type)}function thwma_delete_selected_address(elm,type,key){thwma_address.delete_address(elm,type,key)}function thwma_delete_selected_address_cart_page(elm,type,key){thwma_address.delete_address_cart_page(elm,type,key)}function thwma_guest_users_delete_selected_address_cart_page(elm,type,key){thwma_address.guest_users_delete_address_cart_page(elm,type,key)}function thwma_set_default_address(elm,type,key){thwma_address.set_default_address(elm,type,key)}function thwma_set_default_address_cart_page(elm,type,key){thwma_address.set_default_address_cart_page(elm,type,key)}function thwma_show_custom_popup(e,section,map_type){thwma_address.show_custom_popup(e,section,map_type)}function thwma_populate_selected_section_address(e,elm,key,section,map_type){e.preventDefault(),thwma_address.populate_selected_section_address(e,elm,key,section,map_type)}function thwma_add_new_shipping_address(e,elm,type){e.preventDefault(),thwma_address.add_new_shipping_address_model(e,elm,type)}function thwma_cart_shipping_popup(e){thwma_address.cart_shipping_modal(e)}function thwma_cart_save_address(event){event.preventDefault(),thwma_address.cart_save_address(event)}function thwma_guest_users_add_new_shipping_address(e,elm,type){e.preventDefault(),thwma_address.guest_users_add_new_shipping_address_modal(e,elm,type)}function thwma_cart_save_guest_address(event){event.preventDefault(),thwma_address.cart_save_guest_address(event)}function thwma_close_cart_adr_list_modal(e){thwma_address.close_cart_adr_list_modal(e)}function thwma_close_cart_add_adr_modal(e){thwma_address.close_cart_add_adr_modal(e)}function thwma_remove_multi_shipping_tr(e,$this){thwma_address.remove_multi_shipping_tr(e,$this)}function thwma_save_multi_ship_adr_btn(e,$this){thwma_address.save_multi_ship_adr_btn(e)}var thwma_auto_suggest=function($,window,document){function init_cart_shipping_autocomplete(){function fill_cart_shipping_Address(){clear_cart_shipping_form_values();var place=cart_shipping_autocomplete.getPlace();for(var field in place.address_components)for(var type in place.address_components[field].types)for(var adrs_fld in cart_shipping_component_form)if(adrs_fld==place.address_components[field].types[type]){var prop=cart_shipping_component_form[adrs_fld][1];if(place.address_components[field].hasOwnProperty(prop))if("administrative_area_level_1"==adrs_fld||"administrative_area_level_2"==adrs_fld||"administrative_area_level_3"==adrs_fld){if(1==thwma_public_var.enable_console_log&&console.log(place.address_components[field][prop]),null!=thwma_public_var.state_code_convert){var state_code_convert_arr=thwma_public_var.state_code_convert,state_code_obj=jQuery.parseJSON(state_code_convert_arr);$.each(state_code_obj,function(key,value){place.address_components[field][prop]==key&&(place.address_components[field][prop]=value)})}$("#"+cart_shipping_component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}else $("#"+cart_shipping_component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}fill_cart_shipping_street_number(place),fill_cart_shipping_state_field(place),$(document.body).trigger("thmap_after_cart_shipping_autofill",[place,cart_shipping_component_form])}function clear_cart_shipping_form_values(){for(var field in cart_shipping_form_fields)$("#"+field).val("").change()}function set_autocomplete_cart_shipping_country(){var country="";country=document.getElementById("shipping_country").value,""==country&&""==specific_country?country=store_country:specific_country&&""==country&&(country=specific_country),cart_shipping_autocomplete.setComponentRestrictions({country:country})}function fill_cart_shipping_street_number($place){var street_number=$place.name;""!=street_number&&$("#shipping_address_1").val([street_number]).change()}function fill_cart_shipping_state_field(place){if(""==document.getElementById("shipping_state").value)for(var field in place.address_components)for(var type in place.address_components[field].types)"administrative_area_level_2"==place.address_components[field].types[type]&&$("#shipping_state").val([place.address_components[field].short_name]).change()}var cart_shipping_form_fields={shipping_address_1:"",shipping_address_2:"",shipping_city:"",shipping_state:"",shipping_postcode:"",shipping_country:""},cart_shipping_component_form={street_number:["shipping_address_1","short_name"],route:["shipping_address_2","long_name"],locality:["shipping_city","long_name"],postal_town:["shipping_city","long_name"],sublocality_level_1:["shipping_city","long_name"],administrative_area_level_1:["shipping_state","short_name"],administrative_area_level_2:["shipping_state","short_name"],administrative_area_level_3:["shipping_state","short_name"],country:["shipping_country","short_name"],postal_code:["shipping_postcode","short_name"]};cart_shipping_autocomplete=new google.maps.places.Autocomplete(document.getElementById("shipping_address_1"),{types:["geocode"]}),cart_shipping_autocomplete.addListener("place_changed",fill_cart_shipping_Address);var cart_shipping_country=document.getElementById("shipping_country");null!=cart_shipping_country&&cart_shipping_country.addEventListener("change",function(event){set_autocomplete_cart_shipping_country()},!0);var cart_shipping_address=document.getElementById("shipping_address_1");null!=cart_shipping_address&&cart_shipping_address.addEventListener("focus",function(event){set_autocomplete_cart_shipping_country()},!0)}var store_country=thwma_public_var.store_country,specific_country=thwma_public_var.specific_country;if("yes"==thwma_public_var.enable_autofill){if(null!==document.getElementById("billing_address_1")&&function(){function fillInAddress(){clear_form_values();var place=autocomplete.getPlace();for(var field in place.address_components)for(var type in place.address_components[field].types)for(var adrs_fld in component_form)if(adrs_fld==place.address_components[field].types[type]){var prop=component_form[adrs_fld][1];if(place.address_components[field].hasOwnProperty(prop))if("administrative_area_level_1"==adrs_fld||"administrative_area_level_2"==adrs_fld||"administrative_area_level_3"==adrs_fld){if(1==thwma_public_var.enable_console_log&&console.log(place.address_components[field][prop]),null!=thwma_public_var.state_code_convert){var state_code_convert_arr=thwma_public_var.state_code_convert,state_code_obj=jQuery.parseJSON(state_code_convert_arr);$.each(state_code_obj,function(key,value){place.address_components[field][prop]==key&&(place.address_components[field][prop]=value)})}$("#"+component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}else $("#"+component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}fill_street_number(place),fill_state_field(place),$(document.body).trigger("thmap_after_billing_autofill",[place,component_form])}function clear_form_values(){for(var field in form_fields_value)$("#"+field).val("").change()}function set_autocomplete_country(){var country="";country=document.getElementById("billing_country").value,""==country&&""==specific_country?country=store_country:specific_country&&""==country&&(country=specific_country),autocomplete.setComponentRestrictions({country:country})}function fill_street_number($place){var street_number=$place.name;""!=street_number&&$("#billing_address_1").val([street_number]).change()}function fill_state_field(place){function isValueInSelect(selectElement,value){return $(selectElement).find('option[value="'+value+'"]').length>0}for(var field in place.address_components)for(var type in place.address_components[field].types)if("administrative_area_level_2"===place.address_components[field].types[type]){const newValue=place.address_components[field].short_name;isValueInSelect("#billing_state",newValue)&&$("#billing_state").val(newValue).change()}if(!$("#billing_state").val())for(var field in place.address_components)for(var type in place.address_components[field].types)if("administrative_area_level_1"===place.address_components[field].types[type]){const newValue=place.address_components[field].short_name;isValueInSelect("#billing_state",newValue)&&$("#billing_state").val(newValue).change()}}var form_fields_value={billing_address_1:"",billing_address_2:"",billing_city:"",billing_state:"",billing_postcode:"",billing_country:""},component_form={street_number:["billing_address_1","short_name"],route:["billing_address_2","long_name"],locality:["billing_city","long_name"],postal_town:["billing_city","long_name"],sublocality_level_1:["billing_city","long_name"],administrative_area_level_1:["billing_state","short_name"],administrative_area_level_2:["billing_state","short_name"],administrative_area_level_3:["billing_state","short_name"],country:["billing_country","short_name"],postal_code:["billing_postcode","short_name"]};autocomplete=new google.maps.places.Autocomplete(document.getElementById("billing_address_1"),{types:["geocode"]}),autocomplete.addListener("place_changed",fillInAddress);var billing_country=document.getElementById("billing_country");null!=billing_country&&billing_country.addEventListener("change",function(event){set_autocomplete_country()},!0);var billing_address=document.getElementById("billing_address_1");null!=billing_address&&billing_address.addEventListener("focus",function(event){set_autocomplete_country()},!0)}(),null!==document.getElementById("shipping_address_1")&&function(){function fill_shipping_Address(){clear_shipping_form_values();var place=shipping_autocomplete.getPlace();for(var field in place.address_components)for(var type in place.address_components[field].types)for(var adrs_fld in shipping_component_form)if(adrs_fld==place.address_components[field].types[type]){var prop=shipping_component_form[adrs_fld][1];if(place.address_components[field].hasOwnProperty(prop))if("administrative_area_level_1"==adrs_fld||"administrative_area_level_2"==adrs_fld||"administrative_area_level_3"==adrs_fld){if(1==thwma_public_var.enable_console_log&&console.log(place.address_components[field][prop]),null!=thwma_public_var.state_code_convert){var state_code_convert_arr=thwma_public_var.state_code_convert,state_code_obj=jQuery.parseJSON(state_code_convert_arr);$.each(state_code_obj,function(key,value){place.address_components[field][prop]==key&&(place.address_components[field][prop]=value)})}$("#"+shipping_component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}else $("#"+shipping_component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change()}fill_shipping_street_number(place),fill_shipping_state_field(place),$(document.body).trigger("thmap_after_shipping_autofill",[place,shipping_component_form])}function clear_shipping_form_values(){for(var field in shipping_form_fields)$("#"+field).val("").change()}function set_autocomplete_shipping_country(){var country="";country=document.getElementById("shipping_country").value,""==country&&""==specific_country?country=store_country:specific_country&&""==country&&(country=specific_country),shipping_autocomplete.setComponentRestrictions({country:country})}function fill_shipping_street_number($place){var street_number=$place.name;""!=street_number&&$("#shipping_address_1").val([street_number]).change()}function fill_shipping_state_field(place){function isValueInSelect(selectElement,value){return $(selectElement).find('option[value="'+value+'"]').length>0}for(var field in place.address_components)for(var type in place.address_components[field].types)if("administrative_area_level_2"===place.address_components[field].types[type]){const newValue=place.address_components[field].short_name;isValueInSelect("#shipping_state",newValue)&&$("#shipping_state").val(newValue).change()}if(!$("#shipping_state").val())for(var field in place.address_components)for(var type in place.address_components[field].types)if("administrative_area_level_1"===place.address_components[field].types[type]){const newValue=place.address_components[field].short_name;isValueInSelect("#shipping_state",newValue)&&$("#shipping_state").val(newValue).change()}}var shipping_form_fields={shipping_address_1:"",shipping_address_2:"",shipping_city:"",shipping_state:"",shipping_postcode:"",shipping_country:""},shipping_component_form={street_number:["shipping_address_1","short_name"],route:["shipping_address_2","long_name"],locality:["shipping_city","long_name"],postal_town:["shipping_city","long_name"],sublocality_level_1:["shipping_city","long_name"],administrative_area_level_1:["shipping_state","short_name"],administrative_area_level_2:["shipping_state","short_name"],administrative_area_level_3:["shipping_state","short_name"],country:["shipping_country","short_name"],postal_code:["shipping_postcode","short_name"]};shipping_autocomplete=new google.maps.places.Autocomplete(document.getElementById("shipping_address_1"),{types:["geocode"]}),shipping_autocomplete.getPlace(),shipping_autocomplete.addListener("place_changed",fill_shipping_Address);var shipping_country=document.getElementById("shipping_country");null!=shipping_country&&shipping_country.addEventListener("change",function(event){set_autocomplete_shipping_country()},!0);var shipping_address=document.getElementById("shipping_address_1");null!=shipping_address&&shipping_address.addEventListener("focus",function(event){set_autocomplete_shipping_country()},!0)}(),null!=document.getElementById("billing_address_1")){var adrs_billing_field=document.getElementById("billing_address_1");google.maps.event.addDomListener(adrs_billing_field,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}if(null!=document.getElementById("shipping_address_1")){var adrs_shipping_field=document.getElementById("shipping_address_1");google.maps.event.addDomListener(adrs_shipping_field,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}}if("yes"==thwma_public_var.enable_autofill)return{init_cart_shipping_autocomplete:init_cart_shipping_autocomplete}}(window.jQuery,window,document),thwma_address=function($,window,document){"use strict";function show_billing_popup(e){e.preventDefault(),$(".thwma-btn").removeClass("slctd-adrs");var selected_address=$("#thwma_hidden_field_billing").val();selected_address&&$("."+selected_address).addClass("slctd-adrs"),bpopup.dialog("open"),active=!1}function show_shipping_popup(e){e.preventDefault(),spopup.dialog("open"),active=!1}function show_custom_popup(e,section,map_type){e.preventDefault();var cus_popup=$("#thwma-custom-tile-field_"+section);if($(window).width()<600){var popupwidth=$(window).width()-20;cus_popup.dialog({dialogClass:"wp-dialog thwma-popup",title:thwma_public_var.addresses,modal:!0,autoOpen:!1,width:popupwidth})}else cus_popup.dialog({dialogClass:"wp-dialog thwma-popup",title:"Addresses",modal:!0,autoOpen:!1,minHeight:400,maxHeight:600,width:780});active=!1,setup_section_address_slider(section,map_type),cus_popup.dialog("open")}function populate_selected_address(elm,address_type,key){var selected_address_id=key,data={action:"get_address_with_id",security:thwma_public_var.get_address_with_id_nonce,selected_address_id:selected_address_id,selected_type:address_type};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){var sell_countries=thwma_public_var.sell_countries,sell_countries_size=Object.keys(sell_countries).length,address_fields=[];address_fields="billing"==address_type?thwma_public_var.address_fields_billing:thwma_public_var.address_fields_shipping,$.each(address_fields,function(f_key,f_type){var input_elm="";input_elm="radio"==f_type||"checkboxgroup"==f_type?$("input[name="+f_key+"]"):$(thwma_public_var.checkout_page_form_class).find("#"+f_key);var skip=1==sell_countries_size&&f_key==address_type+"_country";if(1==sell_countries_size&&(skip="billing_country"==f_key),!skip&&input_elm.length){var _type=input_elm.getType(),_value=response[f_key];"file"===f_type&&(_type="file"),thwma_public_base.set_field_value_by_elm(input_elm,_type,_value,f_key)}})}}),"billing"==address_type?($("#thwma_hidden_field_billing").val(selected_address_id),bpopup.dialog("close")):($("#thwma_hidden_field_shipping").val(selected_address_id),spopup.dialog("close"))}function add_new_address(elm,address_type){var sell_countries=thwma_public_var.sell_countries,sell_countries_size=Object.keys(sell_countries).length,address_fields=[];"billing"==address_type?(address_fields=thwma_public_var.address_fields_billing,$("#thwma_hidden_field_billing").val("add_address")):(address_fields=thwma_public_var.address_fields_shipping,$("#thwma_hidden_field_shipping").val("add_address")),$.each(address_fields,function(f_key,f_type){var input_elm="";input_elm=$("radio"==f_type||"checkboxgroup"==f_type?"input[name="+f_key+"]":"#"+f_key);var skip=1==sell_countries_size&&f_key==address_type+"_country";if(1==sell_countries_size&&(skip="billing_country"==f_key),!skip&&input_elm.length){var _type=input_elm.getType();"file"===f_type&&(_type="file"),thwma_public_base.thwma_set_field_value_by_elm(input_elm,_type,"")}}),bpopup.dialog("close"),spopup.dialog("close")}function delete_address(elm,type,key){"billing"==type?$("#thwma-billing-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'):$("#thwma-shipping-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var selected_address_id=key,selected_type=type,data={action:"delete_address_with_id",security:thwma_public_var.delete_address_with_id_nonce,selected_address_id:selected_address_id,selected_type:selected_type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("#thwma-billing-tile-field").html(response.result_billing),$("#thwma-shipping-tile-field").html(response.result_shipping),$(".ajaxBusy").hide();$("#thwma_hidden_field_"+type).val();setup_billing_address_slider("billing"),setup_shipping_address_slider("shipping")}})}function set_default_address(elm,type,key){"billing"==type?$("#thwma-billing-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'):$("#thwma-shipping-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var selected_address_id=key,data={action:"set_default_address",security:thwma_public_var.set_default_address_nonce,selected_address_id:selected_address_id,selected_type:type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("#thwma-billing-tile-field").html(response.result_billing),$("#thwma-shipping-tile-field").html(response.result_shipping),$(".ajaxBusy").hide();$("#thwma_hidden_field_"+type).val();setup_billing_address_slider("billing"),setup_shipping_address_slider("shipping")}})}function populate_selected_section_address(e,elm,adrs_key,section,map_type){var sections=thwma_public_var.custom_sections,map_fields="";$.each(sections,function(key,val){key==section&&(map_fields=val.map_fields)}),populate_section_address(adrs_key,section,map_fields,map_type)}function populate_section_address(select_type,key,map_fields,map_type){var data={action:"get_address_with_id",security:thwma_public_var.get_address_with_id_nonce,selected_address_id:select_type,selected_type:map_type,section_name:key};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$.each(map_fields,function(address_key,section_field){var meta_val=response[address_key],meta_key=$("#"+section_field);thwma_public_base.set_field_value_by_elm(meta_key,"select",meta_val,section_field)})}}),$(".ui-dialog-content").dialog("close")}function slider_arrow_limits(items_per_view,prev,next,type){var get_addr_count=$(".control-buttons-"+type+" .get_addr_count").val(),nw_addr_count=get_addr_count,thslider_viewport_width=$(".thwma_my_acnt .thwma-thslider-viewport."+type).width(),address_limit="",default_address="";if("billing"==type)var address_limit=thwma_public_var.billing_adr_limit,default_address=thwma_public_var.default_bil_address;else var address_limit=thwma_public_var.shipping_adr_limit,default_address=thwma_public_var.default_ship_address;""!=address_limit&&parseInt(address_limit)<parseInt(nw_addr_count)&&(nw_addr_count=address_limit);var adrs_limit="",adrs_limit_2="";if(""!=default_address)var adrs_limit="4",adrs_limit_2="3",adrs_limit_3="2";else var adrs_limit="3",adrs_limit_2="2",adrs_limit_3="1";if(thslider_viewport_width){var prevBtn=$(".control-buttons .thwma-thslider-prev."+type),nextBtn=$(".control-buttons .thwma-thslider-next."+type);thslider_viewport_width>600?parseInt(nw_addr_count)>parseInt(adrs_limit)?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")):thslider_viewport_width<600&&thslider_viewport_width>300?parseInt(nw_addr_count)>parseInt(adrs_limit_2)?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")):thslider_viewport_width<300&&(parseInt(nw_addr_count)>parseInt(adrs_limit_3)?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")))}}function cart_slider_arrow_limits(items_per_view,prev,next,type){var get_addr_count=$(".control-buttons-"+type+" .get_addr_count").val(),nw_addr_count=get_addr_count-1,thslider_viewport_width=$(".thwma_my_acnt .thwma-thslider-viewport.multi-"+type).width();if(thslider_viewport_width){var prevBtn=$(".control-buttons .thwma-thslider-prev.multi-"+type),nextBtn=$(".control-buttons .thwma-thslider-next.multi-"+type);thslider_viewport_width>600?nw_addr_count>3?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")):thslider_viewport_width<600&&thslider_viewport_width>300?nw_addr_count>2?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")):thslider_viewport_width<300&&(nw_addr_count>1?(prevBtn.css("display","block"),nextBtn.css("display","block")):(prevBtn.css("display","none"),nextBtn.css("display","none")))}}function move_slider(slider,prevBtn,nextBtn,leftPos,startPos,endPos,totalItems,itemsPerView){var active=!0;slider.animate({left:leftPos},{duration:500,complete:function(){enable_disable_prev_next_action(prevBtn,nextBtn,startPos,endPos,totalItems,itemsPerView),active=!1}})}function enable_disable_prev_next_action(prevBtn,nextBtn,startPos,endPos,totalItems,itemsPerView){var disablePrev=!1,disableNext=!1;0===startPos&&(disablePrev=!0),1==startPos&&(disablePrev=!0),endPos===totalItems&&(disableNext=!0),prevBtn.removeClass("disabled"),nextBtn.removeClass("disabled"),disablePrev&&prevBtn.addClass("disabled"),disableNext&&nextBtn.addClass("disabled")}function setup_billing_address_slider(type){var list=($(".thwma-thslider-viewport"),$(".thwma-thslider-list.bill")),prevBtn=$(".control-buttons .thwma-thslider-prev.billing"),nextBtn=$(".control-buttons .thwma-thslider-next.billing"),total_items=$(".thwma-thslider-item."+type).length,total_width=230*total_items,finalPos=total_items,leftPos="",startPos=1,endPos=total_items>items_per_view?items_per_view:finalPos;slider_arrow_limits(items_per_view,prevBtn,nextBtn,"billing"),list.css("width",total_width),prevBtn.click(function(){var rem_to_view=startPos-1,items_next_view=items_per_view;rem_to_view<items_per_view?(startPos=1,endPos=items_per_view,items_next_view=rem_to_view):(startPos-=items_per_view,endPos-=items_per_view),rem_to_view>0&&(leftPos=1===startPos?1:"+="+230*items_next_view,move_slider(list,prevBtn,nextBtn,leftPos,startPos,endPos,total_items,items_per_view))}),nextBtn.click(function(){var rem_to_view=total_items-endPos,items_next_view=items_per_view;rem_to_view<items_per_view?(startPos+=rem_to_view,endPos+=rem_to_view,items_next_view=rem_to_view):(startPos+=items_per_view,endPos+=items_per_view),rem_to_view>0&&(leftPos="-="+230*items_next_view,move_slider(list,prevBtn,nextBtn,leftPos,startPos,endPos,total_items,items_per_view))})}function setup_shipping_address_slider(type){var ship_list=($(".thwma-thslider-viewport"),$(".thwma-thslider-list.ship")),ship_prevBtn=$(".control-buttons .thwma-thslider-prev.shipping"),ship_nextBtn=$(".control-buttons .thwma-thslider-next.shipping"),ship_total_items=$(".thwma-thslider-item."+type).length,ship_total_width=230*ship_total_items,ship_finalPos=ship_total_items,ship_leftPos="",ship_startPos=1,ship_endPos=ship_total_items>items_per_view?items_per_view:ship_finalPos;slider_arrow_limits(items_per_view,ship_prevBtn,ship_nextBtn,"shipping"),ship_list.css("width",ship_total_width),ship_prevBtn.click(function(){var rem_to_view=ship_startPos-1,items_next_view=items_per_view;rem_to_view<items_per_view?(ship_startPos=1,ship_endPos=items_per_view,items_next_view=rem_to_view):(ship_startPos-=items_per_view,ship_endPos-=items_per_view),rem_to_view>0&&(ship_leftPos=1===ship_startPos?1:"+="+230*items_next_view,move_slider(ship_list,ship_prevBtn,ship_nextBtn,ship_leftPos,ship_startPos,ship_endPos,ship_total_items,items_per_view))}),ship_nextBtn.click(function(){var rem_to_view=ship_total_items-ship_endPos,items_next_view=items_per_view;rem_to_view<items_per_view?(ship_startPos+=rem_to_view,ship_endPos+=rem_to_view,items_next_view=rem_to_view):(ship_startPos+=items_per_view,ship_endPos+=items_per_view),rem_to_view>0&&(ship_leftPos="-="+230*items_next_view,move_slider(ship_list,ship_prevBtn,ship_nextBtn,ship_leftPos,ship_startPos,ship_endPos,ship_total_items,items_per_view))})}function setup_cart_shipping_address_slider(type){var mitem_width="",mship_total_width="",mship_total_items="",mship_list=($(".thwma-cart-shipping-tile-field .thwma-thslider-viewport"),$(".thwma-cart-shipping-tile-field .thwma-thslider-list-ms.ship")),mship_prevBtn=$(".thwma-cart-shipping-tile-field .control-buttons .thwma-thslider-prev.multi-shipping"),mship_nextBtn=$(".thwma-cart-shipping-tile-field .control-buttons .thwma-thslider-next.multi-shipping"),mship_close=$(".thwma-cart-shipping-tile-field .thwma-cart-modal-close"),mship_addnew=$(".thwma-cart-shipping-tile-field .btn-add-address"),mship_total_items=$("input[name=ship_to_multi_address]").attr("data-address_count"),mitem_width=230,mship_total_width=mship_total_items*mitem_width,mship_finalPos=mship_total_items,mship_leftPos="",mship_startPos=1;null==m_items_per_view&&(m_items_per_view=items_per_view());var mship_endPos=mship_total_items>m_items_per_view?m_items_per_view:mship_finalPos;cart_slider_arrow_limits(m_items_per_view,mship_prevBtn,mship_nextBtn,"shipping"),mship_list.css("width",mship_total_width),mship_prevBtn.click(function(){var mship_total_items=$("input[name=ship_to_multi_address]").attr("data-address_count"),mrem_to_view=mship_startPos-1,mitems_next_view=m_items_per_view;mrem_to_view<m_items_per_view?(mship_startPos=1,mship_endPos=m_items_per_view,mitems_next_view=mrem_to_view):(mship_startPos-=m_items_per_view,mship_endPos-=m_items_per_view),mrem_to_view>0&&(mship_leftPos=1===mship_startPos?1:"+="+mitem_width*mitems_next_view,move_slider(mship_list,mship_prevBtn,mship_nextBtn,mship_leftPos,mship_startPos,mship_endPos,mship_total_items,m_items_per_view))}),mship_nextBtn.click(function(){var mship_total_items=$("input[name=ship_to_multi_address]").attr("data-address_count"),mrem_to_view=mship_total_items-mship_endPos,mitems_next_view=m_items_per_view;if(mrem_to_view<m_items_per_view?(mship_startPos+=mrem_to_view,mship_endPos+=mrem_to_view,mitems_next_view=mrem_to_view):(mship_startPos+=m_items_per_view,mship_endPos+=m_items_per_view),mrem_to_view>0)return mship_leftPos="-="+mitem_width*mitems_next_view,move_slider(mship_list,mship_prevBtn,mship_nextBtn,mship_leftPos,mship_startPos,mship_endPos,mship_total_items,m_items_per_view),!1}),mship_close.click(function(){mship_leftPos=1,move_slider(mship_list,mship_prevBtn,mship_nextBtn,mship_leftPos,mship_startPos,mship_endPos,mship_total_items,m_items_per_view)}),mship_addnew.click(function(){mship_leftPos=1,move_slider(mship_list,mship_prevBtn,mship_nextBtn,mship_leftPos,mship_startPos,mship_endPos,mship_total_items,m_items_per_view)})}function items_per_view(){if($("#thwma-cart-shipping-tile-field .thwma-thslider-box").length>0&&$(window).width()>600){var mbox=$(".thwma-thslider-box"),m_maxWidth=Math.max.apply(null,mbox.map(function(){return $(this).width()}).get());if(m_maxWidth<460&&!(m_maxWidth<=0)){var m_items_per_view=1;mbox.css("width","260px")}else if(m_maxWidth<690&&!(m_maxWidth<=0)){var m_items_per_view=2;mbox.css("width","480px")}else var m_items_per_view=3}return m_items_per_view}function setup_section_address_slider(section,map_type){if(exist_slider>0&&$(window).width()>600){var box=$(".thwma-thslider-box"),maxWidth=Math.max.apply(null,box.map(function(){return $(this).width()}).get());if(maxWidth<460&&!(maxWidth<=0)){var items_per_view=1;box.css("width","260px")}else if(maxWidth<690&&!(maxWidth<=0)){var items_per_view=2;box.css("width","480px")}else var items_per_view=3;var sectn_parent=$("#thslider-"+section),sectn_list=($(".thwma-thslider-viewport"),sectn_parent.find(".thwma-thslider-list."+section)),sectn_prevBtn=sectn_parent.find(".control-buttons .thwma-thslider-prev."+section),sectn_nextBtn=sectn_parent.find(".control-buttons .thwma-thslider-next."+section);move_slider(sectn_list,sectn_prevBtn,sectn_nextBtn,"",1,3,3,3);var sectn_total_items=$(".thwma-thslider-item_c."+section).length,sectn_total_width=230*sectn_total_items,sectn_finalPos=sectn_total_items,sectn_leftPos="",sectn_startPos=1,sectn_endPos=sectn_total_items>items_per_view?items_per_view:sectn_finalPos;sectn_list.css("width",sectn_total_width),sectn_total_items<=3&&($(".control-buttons.control-buttons"+section).css("display","none"),sectn_prevBtn.css("display","none"),sectn_nextBtn.css("display","none")),sectn_prevBtn.unbind().click(function(){var rem_to_view=sectn_startPos-1,items_next_view=items_per_view;rem_to_view<items_per_view?(sectn_startPos=1,sectn_endPos=items_per_view,items_next_view=rem_to_view):(sectn_startPos-=items_per_view,sectn_endPos-=items_per_view),rem_to_view>0&&(sectn_leftPos=1===sectn_startPos?1:"+="+230*items_next_view,move_slider(sectn_list,sectn_prevBtn,sectn_nextBtn,sectn_leftPos,sectn_startPos,sectn_endPos,sectn_total_items,items_per_view))}),sectn_nextBtn.unbind().click(function(){var rem_to_view=sectn_total_items-sectn_endPos,items_next_view=items_per_view;rem_to_view<items_per_view?(sectn_startPos+=rem_to_view,sectn_endPos+=rem_to_view,items_next_view=rem_to_view):(sectn_startPos+=items_per_view,sectn_endPos+=items_per_view),rem_to_view>0&&(sectn_leftPos="-="+230*items_next_view,move_slider(sectn_list,sectn_prevBtn,sectn_nextBtn,sectn_leftPos,sectn_startPos,sectn_endPos,sectn_total_items,items_per_view))})}}function theme_base_style_change(){var slider_wndo=$(".thwma-thslider-box").width(),new_slider_wndo=parseInt(slider_wndo)-parseInt(10);$(".thwma_twentytwelve_acnt .thwma-thslider-box").width(new_slider_wndo),$(".thwma_twentyfourteen_acnt .thwma-thslider-box").width(new_slider_wndo),$(".thwma_twentyfifteen_acnt .thwma-thslider-box").width(new_slider_wndo),$(".thwma_twentyeleven_acnt .thwma-thslider-box").width(new_slider_wndo),$(".thwma_divi_acnt .thwma-thslider-box").width(new_slider_wndo)}function initialize_select2(){$("select#shipping_country").select2({tags:!0}),$("select#shipping_state").select2({tags:!0})}function cart_shipping_popup(e){e.preventDefault(),$(".cart-shipping-addresses").empty(),cspopup.dialog("open"),active=!1}function cart_save_address(e){
$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),e.preventDefault(),$(".ajaxBusy").show();var cart_shipping=[],hidden_ids=[];$(".thwma-cart-shipping-form-section").find(".thwcfe-disabled-field").each(function(){hidden_ids.push($(this).attr("id"))}),cart_shipping=$("#cart_shipping_form_wrap :input").serialize();var data={action:"thwma_save_address",security:$("#cart_ship_form_action").val(),cart_shipping:cart_shipping,cfe_hide_field:hidden_ids};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){if("true"==response.true_check){$("input[name=ship_to_multi_address]").attr("data-address_count",response.address_count);var modal2=document.getElementById("thwma-cart-shipping-form-section");$(".ajaxBusy").hide(),$("#cart_shipping_form").find("input[type=text],select").val(""),$("#thwma-cart-shipping-tile-field").html(response.result_shipping),$(".multi-shipping-wrapper").html(response.output_table),cartpopup.dialog("close"),modal2.style.display="none"}else $(".thwma_hidden_error_mssgs").addClass("show_msgs"),$(".thwma_hidden_error_mssgs.show_msgs").html(response.true_check),$(".ajaxBusy").hide();populate_default_adr(),setup_cart_shipping_address_slider("shipping")}})}function delete_address_cart_page(elm,type,key){"shipping"==type&&$("#thwma-cart-shipping-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var selected_address_id=key,selected_type=type,data={action:"delete_address_with_id_cart",security:thwma_public_var.delete_address_with_id_cart_nonce,selected_address_id:selected_address_id,selected_type:selected_type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("input[name=ship_to_multi_address]").attr("data-address_count",response.address_count),$("#thwma-cart-shipping-tile-field").html(response.result_shipping),$.each($(".thwma-cart-shipping-options.select option"),function(key,value){$(this).val()==response.address_key&&$(this).remove()}),0==response.address_count&&($(".multi-shipping-table").css("display","none"),$(".thwma_cart_multi_shipping_display").css("display","none")),$(".ajaxBusy").hide();$("#thwma_hidden_field_"+type).val();"shipping"==type&&(setup_cart_shipping_address_slider(type),$("body").trigger("update_checkout"))}})}function set_default_address_cart_page(elm,type,key){"shipping"==type&&$("#thwma-cart-shipping-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var selected_address_id=key,data={action:"set_default_address_cart",security:thwma_public_var.set_default_address_cart_nonce,selected_address_id:selected_address_id,selected_type:type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("#thwma-cart-shipping-tile-field").html(response.result_shipping),$(".multi-shipping-wrapper").html(response.output_table),$(".ajaxBusy").hide();$("#thwma_hidden_field_"+type).val();"shipping"==type&&(setup_cart_shipping_address_slider(type),$("body").trigger("update_checkout")),jQuery("[name='ship_default_adr']").val(response.default_address),populate_default_adr()}})}function ship_to_multi_address(){"no"==$("input[name=ship_to_multi_address]").val()?($("[name='ship_to_multi_address']").removeClass("active_multi_ship"),$(".thwma_cart_shipping_button").css("display","none"),$(".multi-shipping-table").css("display","none"),$(".thwma_cart_multi_shipping_display").css("display","none"),$("#shipping_tiles").css("display","block"),$(".woocommerce-shipping-fields__field-wrapper").css("display","block"),$("p#thwma-shipping-alt_field").css("display","block")):($("[name='ship_to_multi_address']").addClass("active_multi_ship"),$(".thwma_cart_shipping_button").css("display","block"),$(".multi-shipping-table").css("display","block"),$(".thwma_cart_multi_shipping_display").css("display","block"),$("#shipping_tiles").css("display","none"),$(".woocommerce-shipping-fields__field-wrapper").css("display","none"),$("p#thwma-shipping-alt_field").css("display","none"));var checkout_check=thwma_public_var.is_checkout_page;$(".woocommerce").on("click","input[name=ship_to_different_address]",function(){if(0==$(this).prop("checked")){$("input[name=ship_to_multi_address]").val("no");var value="no",data={action:"enable_ship_to_multi_address",security:thwma_public_var.enable_ship_to_multi_address_nonce,value:value};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("body").trigger("update_checkout")}})}else if(1==$(this).prop("checked")&&$(".active_multi_ship")[0]){$("input[name=ship_to_multi_address]").val("yes");var value="yes",data={action:"enable_ship_to_multi_address",security:thwma_public_var.enable_ship_to_multi_address_nonce,value:value};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("body").trigger("update_checkout")}})}});var shipping_section=$("input[name=ship_to_different_address]").prop("checked"),ship_to_multi_address=$("input[name=ship_to_multi_address]").val();if(1==checkout_check){var ship_to_multi_address=$('input[name="ship_to_multi_address"]').val();if(null!=ship_to_multi_address){if(ship_to_multi_address.length){if(1==shipping_section)if("yes"==ship_to_multi_address){$("[name='ship_to_multi_address']").addClass("active_multi_ship"),$(".thwma_cart_shipping_button").css("display","block"),$(".multi-shipping-table").css("display","table"),$(".thwma_cart_multi_shipping_display").css("display","block"),$(".link_enabled_class").css("display","block"),$(".link_disabled_class").css("display","none"),$("#shipping_tiles").css("display","none"),$(".woocommerce-shipping-fields__field-wrapper").css("display","none"),$("p#thwma-shipping-alt_field").css("display","none");var value="yes"}else $("[name='ship_to_multi_address']").removeClass("active_multi_ship"),$("#shipping_tiles").css("display","block"),$(".woocommerce-shipping-fields__field-wrapper").css("display","block"),$("p#thwma-shipping-alt_field").css("display","block");else var value="no";var data={action:"enable_ship_to_multi_address",security:thwma_public_var.enable_ship_to_multi_address_nonce,value:value};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("body").trigger("update_checkout")}})}}else $("#shipping_tiles").css("display","block"),$(".woocommerce-shipping-fields__field-wrapper").css("display","block"),$("p#thwma-shipping-alt_field").css("display","block")}$(".woocommerce").on("click","input[name=ship_to_multi_address]",function(){if($(this).is(":checked")){$("[name='ship_to_multi_address']").addClass("active_multi_ship"),$(".thwma_cart_shipping_button").css("display","block");0==$(this).attr("data-address_count")?($(".multi-shipping-table").css("display","none"),$(".thwma_cart_multi_shipping_display").css("display","none"),$(".link_enabled_class").css("display","none")):($(".multi-shipping-table").css("display","table"),$(".thwma_cart_multi_shipping_display").css("display","block"),$(".link_enabled_class").css("display","block")),$(".link_disabled_class").css("display","none"),$(this).val("yes"),$("#shipping_tiles").css("display","none"),$(".woocommerce-shipping-fields__field-wrapper").css("display","none"),$("p#thwma-shipping-alt_field").css("display","none");$(".ship_to_diff_adr").attr("data-cart_quantity");$(".ship_to_diff_adr").each(function(index){$(this).attr("data-cart_quantity")>1?$(this).css("display","block"):$(this).css("display","none")})}else if(0==$(this).prop("checked")){$("[name='ship_to_multi_address']").removeClass("active_multi_ship"),$("#thwma-cart-shipping-form-section").html(""),$(".thwma_cart_shipping_button").css("display","none"),$(".multi-shipping-table").css("display","none"),$(".thwma_cart_multi_shipping_display").css("display","none"),$(this).val("no"),$("#shipping_tiles").css("display","block"),$(".woocommerce-shipping-fields__field-wrapper").css("display","block"),$("p#thwma-shipping-alt_field").css("display","block");var modal_data=document.getElementById("thwma-cart-shipping-form-section");modal_data.style.display="none"}var value=$(this).val(),data={action:"enable_ship_to_multi_address",security:thwma_public_var.enable_ship_to_multi_address_nonce,value:value};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("body").trigger("update_checkout")}})})}function shipping_method_change(){if("yes"===thwma_public_var.cart_shipping_enabled){$("body").trigger("update_checkout");var ship_mthd_arry=[];setTimeout(function(){$('select.shipping_method, input[name^="shipping_method"][type="radio"]:checked').each(function(){var method_id=$(this).val(),nearest_ul_id=$(this).closest("ul").attr("id"),ship_cart_key=$(this).closest("ul").siblings(".ship-cart-key").val(),ship_cart_unique_key=$(this).closest("ul").siblings(".ship-cart-unique-key").val(),item_name=$(this).closest("ul").siblings(".ship-product-name").text(),item_qty=$(this).closest("ul").siblings(".ship-product-qty").val(),product_id=$(this).closest("ul").siblings(".ship-product-id").val(),shipping_adrs=$(this).closest("ul").siblings(".ship-address-formated").val(),shipping_name=$(this).closest("ul").siblings(".ship-address-name").val();item_name=item_name.replace(":","");var shipping_array={method_id:method_id,parent_ul_id:nearest_ul_id,cart_key:ship_cart_key,cart_unique_key:ship_cart_unique_key,item_name:item_name,product_id:product_id,shipping_adrs:shipping_adrs,shipping_name:shipping_name,item_qty:item_qty};ship_mthd_arry.push(shipping_array)});var data={action:"save_shipping_method_details",security:thwma_public_var.save_shipping_method_details_nonce,ship_method_arr:ship_mthd_arry};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){}})},2e3);var checkout_form=$("form.checkout");checkout_form.on("change",'input[name^="shipping_method"]',function(e){var method_id=$(this).val(),ship_cart_key=($(this).closest("ul").attr("id"),$(this).closest("ul").siblings(".ship-cart-key").val()),item_name=($(this).closest("ul").siblings(".ship-cart-unique-key").val(),$(this).closest("ul").siblings(".ship-product-name").text());$(this).closest("ul").siblings(".ship-product-qty").val(),$(this).closest("ul").siblings(".ship-product-id").val(),$(this).closest("ul").siblings(".ship-address-formated").val(),$(this).closest("ul").siblings(".ship-address-name").val();item_name=item_name.replace(":","");Object.create(null);ship_mthd_arry.forEach(function(entry){entry.cart_key==ship_cart_key&&(entry.method_id=method_id)});var data={action:"save_shipping_method_details",security:thwma_public_var.save_shipping_method_details_nonce,ship_method_arr:ship_mthd_arry};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){}})})}}function create_multiproduct_product_multi_shipping(){$(document).on("click",".ship_to_diff_adr",function(e){e.preventDefault(),$(".multi-shipping-table-overlay").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$(".multi-shipping-table-overlay").css("display","block"),$(".ajaxBusy").show();var $this=$(this),$parent_tr=$this.closest("tr");$this.addClass("multi-ship-link-disabled");var cart_item=$(this).data("cart_item"),cart_item_key=$(this).data("cart_item_key"),$thisbutton=$(this),product_qty=($thisbutton.val(),$(this).data("cart_quantity")),product_id=$(this).data("product_id"),variation_id=$(this).data("variation_id"),qty_field=$this.closest("tbody").find("tr .pdct-qty-"+cart_item_key),qty_field_val=qty_field.val(),new_qty_field_val=product_qty;if(qty_field_val>1){2==qty_field_val&&($this.css("display","none"),$this.removeClass("link_enabled_class"));var new_qty_field_val=qty_field_val-1;$(qty_field).val(new_qty_field_val);var multi_ship_item=$this.closest("tr").find(".multi-ship-item"),parent_id=multi_ship_item.data("multi_ship_parent_id"),updated_qty=multi_ship_item.data("updated_qty"),sub_row_stage=multi_ship_item.data("sub_row_stage");if(0==parent_id)var parent_id=multi_ship_item.data("multi_ship_id");var data={action:"additional_address_management",security:thwma_public_var.additional_address_management_nonce,product_id:product_id,product_sku:"",quantity:product_qty,variation_id:variation_id,cart_item:cart_item,cart_item_key:cart_item_key,parent_item_id:parent_id,sub_row_stage:sub_row_stage,updated_qty:new_qty_field_val};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$(response).insertAfter($parent_tr),$this.attr("data-cart_quantity",updated_qty),$(".ajaxBusy").hide(),$(".multi-shipping-table-overlay").css("display","none"),shipping_method_change(),$("body").trigger("update_checkout")}})}})}function remove_multi_shipping_tr(e,current){current.closest("tr").remove(),$(".multi-shipping-table-overlay").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$(".multi-shipping-table-overlay").css("display","block"),$(".ajaxBusy").show();var ship_to_diff_adr=$(current).closest("tr").find(".ship_to_diff_adr"),product_id=ship_to_diff_adr.data("product_id"),cart_item_key=ship_to_diff_adr.data("cart_item_key"),multi_ship_item=$(current).closest("tr").find(".multi-ship-item"),multi_ship_id=multi_ship_item.data("multi_ship_id"),data={action:"remove_multi_shipping_row",security:thwma_public_var.remove_multi_shipping_row_nonce,product_id:product_id,cart_item_key:cart_item_key,multi_ship_id:multi_ship_id};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$(".ajaxBusy").hide(),$(".multi-shipping-table-overlay").css("display","none"),$("body").trigger("update_checkout"),shipping_method_change()}})}function update_product_qty_from_multi_ship(){$(document).on("change",".multi-ship-pdct-qty",function(e){$(".multi-shipping-table-overlay").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$(".multi-shipping-table-overlay").css("display","block"),$(this).val()<1&&$(this).closest("tr").hide(),$(".ajaxBusy").show();var value=$(this).val(),$this=$(this),cart_key=$this.data("cart_key"),data={action:"update_multi_shipping_qty_field",security:thwma_public_var.update_multi_shipping_qty_field_nonce,value:value,cart_key:cart_key};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){if($this.hasClass("main-pdct-qty")){var value=$this.val(),multi_ship_link=$this.closest("tr").find(".ship_to_diff_adr");value>1?(multi_ship_link.css("display","block"),multi_ship_link.replaceWith(response)):multi_ship_link.css("display","none")}$("body").trigger("update_checkout"),$(".ajaxBusy").hide(),$(".multi-shipping-table-overlay").css("display","none"),shipping_method_change()}})})}function set_default_adr_to_shipping_fields(){var first_set_adrs="",first_tr=$("table.multi-shipping-table").find("tr:nth-child(2)"),first_set_adrs=first_tr.find("select.thwma-cart-shipping-options").val();if(null!=first_set_adrs&&""!=first_set_adrs){populate_selected_address("","shipping",first_set_adrs)}else populate_default_adr()}function populate_default_adr(){var ship_default_adr=jQuery("[name='ship_default_adr']").val();if(null!=ship_default_adr){var response="";if(void 0!=ship_default_adr)var response=jQuery.parseJSON(ship_default_adr);var sell_countries=thwma_public_var.sell_countries,sell_countries_size=Object.keys(sell_countries).length,address_fields=[];address_fields=thwma_public_var.address_fields_shipping,$.each(address_fields,function(f_key,f_type){var input_elm="";input_elm=$("radio"==f_type||"checkboxgroup"==f_type?"input[name="+f_key+"]":"#"+f_key);var skip=1==sell_countries_size&&"shipping_country"==f_key;if(1==sell_countries_size&&(skip="billing_country"==f_key),!skip&&input_elm.length){var _type=input_elm.getType(),_value=response[f_key];"file"===f_type&&(_type="file"),thwma_public_base.set_field_value_by_elm(input_elm,_type,_value,f_key)}})}}function select_cart_mutlti_shipping(){$(".woocommerce").on("change","select.thwma-cart-shipping-options",function(){$(".multi-shipping-table-overlay").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$(".multi-shipping-table-overlay").css("display","block"),$(".ajaxBusy").show();var value=$(this).val(),$this=$(this),product_id=$(this).attr("data-product_id"),cart_key=$(this).attr("data-cart_key"),multi_ship_item=($(this).attr("data-exist_multi_adr"),$this.closest("tr").find(".multi-ship-item")),multi_ship_id=multi_ship_item.data("multi_ship_id"),exist_multi_ship=$(".multi-shipping-adr-data").val(),multi_ship_data=[];if(""!=multi_ship_data){if(void 0!=exist_multi_ship)var multi_ship_data=JSON.parse(exist_multi_ship);jQuery.each(multi_ship_data,function(index,val){multi_ship_data[cart_key]={product_id:product_id,address_name:value}})}var new_multi_ship_dta="";if(void 0!=multi_ship_data)var new_multi_ship_dta=JSON.stringify(multi_ship_data);$(".multi-shipping-adr-data").val(new_multi_ship_dta);var first_tr=$this.closest("table").find("tr:nth-child(2)"),first_set_adrs=first_tr.find("select.thwma-cart-shipping-options").val();0!=thwma_public_var.current_user_id?null!=first_set_adrs&&""!=first_set_adrs?populate_selected_address("","shipping",first_set_adrs):set_default_adr_to_shipping_fields():null!=first_set_adrs&&""!=first_set_adrs&&populate_selected_address("","shipping",first_set_adrs);var data={action:"save_multi_selected_shipping",security:thwma_public_var.save_multi_selected_shipping_nonce,value:value,product_id:product_id,cart_key:cart_key,multi_ship_id:multi_ship_id};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){shipping_method_change(),$(".ajaxBusy").hide(),$(".multi-shipping-table-overlay").css("display","none")}})})}function guest_users_add_new_shipping_address(e,elm,type){e.preventDefault(),cspopup.dialog("close"),initialize_select2(),active=!1,$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var data={action:"guest_users_add_new_shipping_address",security:thwma_public_var.guest_users_add_new_shipping_address_nonce,selected_type:type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){if($("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$("#thwma-cart-shipping-form-section").html(response),"yes"==thwma_public_var.enable_autofill&&(thwma_auto_suggest.init_cart_shipping_autocomplete(),null!=document.getElementById("shipping_address_1"))){var adrs_shipping_field=document.getElementById("shipping_address_1");google.maps.event.addDomListener(adrs_shipping_field,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}initialize_select2(),$(".ajaxBusy").hide()}})}function cart_save_guest_address(e){$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),e.preventDefault(),$(".ajaxBusy").show();var cart_shipping=[],hidden_ids=[];$(".thwma-cart-shipping-form-section").find(".thwcfe-disabled-field").each(function(){hidden_ids.push($(this).attr("id"))}),cart_shipping=$("#cart_shipping_form_wrap :input").serialize();var data={action:"thwma_save_guest_address",security:thwma_public_var.thwma_save_guest_address_nonce,cart_shipping:cart_shipping,cfe_hide_field:hidden_ids};$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){if("true"==response.true_check){$("input[name=ship_to_multi_address]").attr("data-address_count",response.address_count);var modal2=document.getElementById("thwma-cart-shipping-form-section");if($(".ajaxBusy").hide(),$("#cart_shipping_form").find("input[type=text],select").val(""),""!=response.adr_count){if($(".thwma-thslider-list-ms.ship").append(response.new_tile),$(".thwma-cart-shipping-options.select ").append(response.address_dropdown),$(".thwma-thslider.thwma-thslider-guest-user").append(response.slider_arrows),null!=response.default_address&&""!=response.default_address){var elm="",type="shipping",first_set_adrs=response.default_address;populate_selected_address(elm,type,first_set_adrs)}}else if($(".thwma-thslider-box").remove(),$(".thwma-thslider.thwma-thslider-guest-user").prepend(response.new_tile),$(".multi-shipping-wrapper").html(response.shipping_table),$("select.thwma-cart-shipping-options").find('[value="0"]').remove(),$(".thwma-cart-shipping-options.select ").append(response.address_dropdown),$(".th-no-address-msg").remove(),null!=response.default_address&&""!=response.default_address){var elm="",type="shipping",first_set_adrs=response.default_address;populate_selected_address(elm,type,first_set_adrs)}setup_cart_shipping_address_slider("shipping"),modal2.style.display="none"}else setup_cart_shipping_address_slider("shipping"),$("input[name=ship_to_multi_address]").attr("data-address_count",response.address_count),$(".thwma_hidden_error_mssgs").addClass("show_msgs"),$(".thwma_hidden_error_mssgs.show_msgs").html(response.true_check),$(".ajaxBusy").hide();response.address_count==response.address_limit?$(".thwma-thslider-guest-user .add-address.thwma-add-adr ").css("display","none"):$(".thwma-thslider-guest-user .add-address.thwma-add-adr ").css("display","block")}})}function guest_users_delete_address_cart_page(elm,type,key){"shipping"==type&&$("#thwma-cart-shipping-tile-field").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var selected_address_id=key,selected_type=type,data={action:"delete_address_with_id_cart_guest",security:thwma_public_var.delete_address_with_id_cart_guest_nonce,selected_address_id:selected_address_id,selected_type:selected_type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("input[name=ship_to_multi_address]").attr("data-address_count",response.address_count),$(elm).closest("li.thwma-thslider-item-ms.shipping").html(""),$.each($(".thwma-cart-shipping-options.select option"),function(key,value){$(this).val()==response.address_key&&$("option[value="+response.address_key+"]").remove()}),$(".ajaxBusy").hide();$("#thwma_hidden_field_"+type).val();if(response.address_count>3)"shipping"==type&&$("body").trigger("update_checkout");else{$(".control-buttons-shipping .thwma-thslider-next").css("display","none");1==$("ul.thwma-thslider-list-ms").position().left&&$(".control-buttons-shipping .thwma-thslider-prev").css("display","none")}0==response.address_count&&($(".control-buttons-shipping .thwma-thslider-prev").css("display","none"),$(".multi-shipping-table").css("display","none"),$(".thwma_cart_multi_shipping_display").css("display","none"));var add_new_button=response.add_new_button;null!=add_new_button&&(null==$(".add-address.thwma-add-adr").length?$(".thwma-thslider.thwma-thslider-guest-user").append(add_new_button):$(".thwma-thslider-guest-user .add-address.thwma-add-adr ").css("display","block"))}})}function cart_shipping_modal(e){e.preventDefault(),$(".thwma_hidden_error_mssgs").css("display","none");var modal=document.getElementById("thwma-cart-shipping-tile-field");document.getElementById("thwma-cart-shipping-form-section").style.display="none",modal.style.display="block"}function add_new_shipping_address_model(e,elm,type){e.preventDefault();var modal=($("form.woocommerce-cart-form"),document.getElementById("thwma-cart-shipping-tile-field")),modal2=document.getElementById("thwma-cart-shipping-form-section");modal.style.display="none",modal2.style.display="block",$(".select2-container.select2-container--default").css("width","100%"),$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var data={action:"add_new_shipping_address",security:thwma_public_var.add_new_shipping_address_nonce,selected_type:type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$("#thwma-cart-shipping-form-section").html(response),1==thwma_public_var.thwcfe_is_active&&(thwcfe_public_conditions.validate_all_conditions(null),thwcfe_public_conditions.prepare_shipping_conitional_fields(null,!1)),"yes"==thwma_public_var.enable_autofill&&thwma_auto_suggest.init_cart_shipping_autocomplete(),initialize_select2(),$(".ajaxBusy").hide()}})}function guest_users_add_new_shipping_address_modal(e,elm,type){e.preventDefault();var modal=document.getElementById("thwma-cart-shipping-tile-field"),modal2=document.getElementById("thwma-cart-shipping-form-section");modal.style.display="none",modal2.style.display="block",$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>');var data={action:"guest_users_add_new_shipping_address",security:thwma_public_var.guest_users_add_new_shipping_address_nonce,selected_type:type};$(".ajaxBusy").show(),$.ajax({url:thwma_public_var.ajax_url,data:data,type:"POST",success:function(response){$("#thwma-cart-shipping-form-section").append('<div class="ajaxBusy"> <i class="fa fa-spinner" aria-hidden="true"></i></div>'),$("#thwma-cart-shipping-form-section").html(response),1==thwma_public_var.thwcfe_is_active&&(thwcfe_public_conditions.validate_all_conditions(null),thwcfe_public_conditions.prepare_shipping_conitional_fields(null,!1)),"yes"==thwma_public_var.enable_autofill&&thwma_auto_suggest.init_cart_shipping_autocomplete(),initialize_select2(),$(".ajaxBusy").hide()}})}function close_cart_adr_list_modal(){var modal_data=document.getElementById("thwma-cart-shipping-tile-field");document.getElementsByClassName("thwma-cart-modal-close")[0];modal_data.style.display="none"}function close_cart_add_adr_modal(){var modal_data=document.getElementById("thwma-cart-shipping-form-section");document.getElementsByClassName("thwma-cart-modal-close2")[0];$(".thwma_hidden_error_mssgs").css("display","none"),modal_data.style.display="none"}function save_multi_ship_adr_btn(e){$("body").trigger("update_checkout")}function hide_shipping_custom_fields(){$("table.woocommerce-table--custom-fields.custom-fields th").each(function(){"Shipping Fields"==$(this).html()&&($(this).closest("table.custom-fields tr").nextAll("tr").remove(),$(this).closest("table.custom-fields tr").remove())})}select_cart_mutlti_shipping(),create_multiproduct_product_multi_shipping(),ship_to_multi_address(),shipping_method_change(),update_product_qty_from_multi_ship(),hide_shipping_custom_fields();var default_shipping=$("#thwma_checkbox_shipping").val(),active=!1,bpopup=$("#thwma-billing-tile-field"),spopup=$("#thwma-shipping-tile-field"),cspopup=$("#thwma-shipping-tile-field"),cartpopup=$("#thwma-shipping-tile-field");if($(".address-text").length>0){var maxHeight=Math.max.apply(null,$(".address-text").map(function(){return $(this).outerHeight()}).get());$(".address-text").outerHeight(maxHeight),$(".address-text.wrapper-only").outerHeight(maxHeight+41)}if($(window).width()<600){var popupwidth=$(window).width()-20;bpopup.dialog({dialogClass:"wp-dialog thwma-popup",title:thwma_public_var.billing_address,modal:!0,autoOpen:!1,width:popupwidth}),spopup.dialog({dialogClass:"wp-dialog thwma-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,width:popupwidth}),cspopup.dialog({dialogClass:"wp-dialog thwma-cart-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,width:popupwidth}),cartpopup.dialog({dialogClass:"wp-dialog thwma-cart-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,width:popupwidth})}else bpopup.dialog({dialogClass:"wp-dialog thwma-popup",title:thwma_public_var.billing_address,modal:!0,autoOpen:!1,minHeight:400,maxHeight:600,width:780}),spopup.dialog({dialogClass:"wp-dialog thwma-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,minHeight:400,maxHeight:600,width:780}),cspopup.dialog({dialogClass:"wp-dialog thwma-cart-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,minHeight:400,maxHeight:600,width:780}),cartpopup.dialog({dialogClass:"wp-dialog thwma-cart-popup",title:thwma_public_var.shipping_address,modal:!0,autoOpen:!1,minHeight:400,maxHeight:600,width:780});$("#thwma-billing-alt").change(function(event){event.preventDefault();var select_type=this.value;"add_address"==select_type?add_new_address("","billing"):populate_selected_address("","billing",select_type)}),$("#thwma-shipping-alt").change(function(event){event.preventDefault();var select_type=this.value;"add_address"==select_type?add_new_address("","shipping"):populate_selected_address("","shipping",select_type)});var sections=thwma_public_var.custom_sections;sections&&$.each(sections,function(key,val){var select_id="#thwma_"+key,map_fields=val.map_fields;$(select_id).change(function(event){var select_type=this.value,map_type=val.maped_section;populate_section_address(select_type,key,map_fields,map_type)})}),$("#ship-to-different-address-checkbox").change(function(){$("#ship-to-different-address-checkbox").is(":checked")?$("#thwma_checkbox_shipping").val("ship_select"):$("#thwma_checkbox_shipping").val(default_shipping)});var exist_slider=$(".thwma-thslider-box").length;if($("#thwma-cart-shipping-tile-field .thwma-thslider-box").length>0&&$(window).width()>600){var mbox=$(".thwma-thslider-box"),m_maxWidth=Math.max.apply(null,mbox.map(function(){return $(this).width()}).get());if(m_maxWidth<460&&!(m_maxWidth<=0)){var m_items_per_view=1;mbox.css("width","260px")}else if(m_maxWidth<690&&!(m_maxWidth<=0)){var m_items_per_view=2;mbox.css("width","480px")}else var m_items_per_view=3;setup_cart_shipping_address_slider("shipping")}if(exist_slider>0&&$(window).width()>600){var box=$(".thwma-thslider-box"),maxWidth=Math.max.apply(null,box.map(function(){return $(this).width()}).get());if(maxWidth<460&&!(maxWidth<=0)){var items_per_view=1;box.css("width","260px")}else if(maxWidth<690&&!(maxWidth<=0)){var items_per_view=2;box.css("width","480px")}else var items_per_view=3;setup_shipping_address_slider("shipping"),setup_billing_address_slider("billing")}return theme_base_style_change(),{show_billing_popup:show_billing_popup,show_shipping_popup:show_shipping_popup,populate_selected_address:populate_selected_address,add_new_address:add_new_address,delete_address:delete_address,delete_address_cart_page:delete_address_cart_page,set_default_address:set_default_address,set_default_address_cart_page:set_default_address_cart_page,show_custom_popup:show_custom_popup,populate_selected_section_address:populate_selected_section_address,theme_base_style_change:theme_base_style_change,slider_arrow_limits:slider_arrow_limits,cart_shipping_popup:cart_shipping_popup,cart_shipping_modal:cart_shipping_modal,add_new_shipping_address_model:add_new_shipping_address_model,cart_save_address:cart_save_address,guest_users_add_new_shipping_address:guest_users_add_new_shipping_address,cart_save_guest_address:cart_save_guest_address,select_cart_mutlti_shipping:select_cart_mutlti_shipping,ship_to_multi_address:ship_to_multi_address,guest_users_add_new_shipping_address_modal:guest_users_add_new_shipping_address_modal,close_cart_adr_list_modal:close_cart_adr_list_modal,close_cart_add_adr_modal:close_cart_add_adr_modal,guest_users_delete_address_cart_page:guest_users_delete_address_cart_page,remove_multi_shipping_tr:remove_multi_shipping_tr,save_multi_ship_adr_btn:save_multi_ship_adr_btn,create_multiproduct_product_multi_shipping:create_multiproduct_product_multi_shipping,update_product_qty_from_multi_ship:update_product_qty_from_multi_ship,shipping_method_change:shipping_method_change,hide_shipping_custom_fields:hide_shipping_custom_fields,set_default_adr_to_shipping_fields:set_default_adr_to_shipping_fields}}(window.jQuery,window,document),thwma_public_base=function($,window,document){
"use strict";function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value,f_key){var $wrapper=$(this).closest(".woocommerce-billing-fields,.woocommerce-shipping-fields,.woocommerce-address-fields,.woocommerce-shipping-calculator");switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val([value]).change()):elm.val([value]).change();break;case"select":if(1==thwma_public_var.select_options){var option_values=[];elm.find("option").each(function(option_key,option_val){""!=$(this).val()&&(option_values[option_key]=$(this).val())}),-1!=$.inArray(value,option_values)?elm.prop("multiple")?elm.val(value):elm.val([value]).change():(elm.append($("<option></option>").attr("value",value).text(value)),elm.val([value]).change())}else if(elm.prop("multiple"))elm.val(value);else{var current_user_id=thwma_public_var.current_user_id;0!=current_user_id?$("select#"+f_key).length?$("select#"+f_key).val(value).change():elm.val([value]).change():($("select#"+f_key).val(value).change(),$(document.body).trigger("country_to_state_changed",[value,$wrapper]))}break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).change():elm.val([value]).change();break;case"file":elm.val(value).change(),set_field_value_file(elm,value);break;case"hidden":elm.val(value).change();break;default:$("input#"+f_key+".input-text").val(value).change()}}function thwma_set_field_value_by_elm(elm,type,value){switch(elm.closest("p").removeClass("woocommerce-validated"),elm.closest("p").removeClass("woocommerce-invalid"),type){case"radio":elm.val("");break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val("")):elm.val("");break;case"select":if(1==thwma_public_var.select_options){var option_values=[];elm.find("option").each(function(option_key,option_val){""!=$(this).val()&&(option_values[option_key]=$(this).val())}),-1!=$.inArray(value,option_values)?(elm.prop("multiple"),elm.val("")):(elm.append($("<option></option>").attr("value",value).text(value)),elm.val(""))}else elm.prop("multiple")?elm.val(""):elm.val("").trigger("change.select2");break;case"multiselect":elm.prop("multiple")?void 0!==value&&elm.val(value.split(",")).val(""):elm.val("");break;case"file":elm.val(""),set_field_value_file(elm,value);break;case"hidden":break;default:elm.val("")}}function set_field_value_file(input,uploaded_str){if(thwcfe_public_file_upload){var wrapper=input.closest(".thwcfe-input-field-wrapper");if(uploaded_str){var uploaded=JSON.parse(uploaded_str),prev_html=(uploaded.name,thwcfe_public_file_upload.prepare_preview_html(uploaded));wrapper.find(".thwcfe-upload-preview").html(prev_html),wrapper.find(".thwcfe-uloaded-files").show(),wrapper.find(".thwcfe-checkout-file").hide(),input.trigger("change")}else thwcfe_public_file_upload.clean_file_input(wrapper),wrapper.find(".thwcfe-upload-preview").html(""),wrapper.find(".thwcfe-uloaded-files").hide(),wrapper.find(".thwcfe-checkout-file").show()}}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name="+name+"]:checked").val();break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"[]']:checked").each(function(){valueArr.push($(this).val())}),value=valueArr}else value=$("input[type=checkbox][name="+name+"]:checked").val();break;case"select":case"multiselect":default:value=elm.val()}return value}return $.fn.getType=function(){try{return"INPUT"==this[0].tagName?this[0].type.toLowerCase():this[0].tagName.toLowerCase()}catch(err){return"E001"}},{display_char_count:display_char_count,set_field_value_by_elm:set_field_value_by_elm,get_field_value:get_field_value,thwma_set_field_value_by_elm:thwma_set_field_value_by_elm}}(window.jQuery,window,document);!function($){"use strict";$("#billing_address_1").attr("autocomplete","off"),$(".checkout woocommerce-checkout").attr("autocomplete","off");thwma_public_var.address_array;!function(){$(".wrapper-class")}()}(jQuery);