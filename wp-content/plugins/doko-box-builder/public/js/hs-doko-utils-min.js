!function(o){"use strict";o(document).ready((function(){function d(d,t,i=!0,e=!0,a=!1){var n=d.quantity,r=d.productId,s=d.productPrice,c=d.imageUrl,p=d.unique_id;d.options_is_checked&&(r="p"+r);var _="";if(e||(_="doko-reset-icone-remove"),a)o(t).find('li[data-product-id="'+r+'"]').length>0&&(o(t).find('li[data-product-id="'+r+'"] div.doko-qty-exposant').html(n),o(t).find('li[data-product-id="'+r+'"]').attr("data-product-qty",n).attr("data-hash-code",p),o("table.doko-box-contents tr[data-product-id='"+r+"']  td:nth-child(2)").html(n));else if(i){o(t).empty();var l="<li class='"+_+"' data-product-qty='"+n+"' data-product-price='"+s+"' data-product-id='"+r+"' data-hash-code='"+p+"'><i style='cursor: pointer;' aria-hidden='true'></i><div class='selected-box' ><img class='box-color' src='"+c+"'></div> ",u=!1;wp.hooks.applyFilters("doko_is_dynamic_screen",u,window.doko.current_page)&&(l+="<div class='doko-right-sup-exposant'>x</div>  <div class='doko-qty-exposant'>"+n+"</div>"),l+="</li>",o(t).append(l),o(t).find("li img").css("width","40px"),window.doko.rules=[]}else if(o(t).find('li[data-product-id="'+r+'"]').length>0){var k=o(t).find('li[data-product-id="'+r+'"]').attr("data-product-qty");n=parseInt(k)+1,o(t).find('li[data-product-id="'+r+'"] div.doko-qty-exposant').html(n),o(t).find('li[data-product-id="'+r+'"]').attr("data-product-qty",n).attr("data-hash-code",p)}else{l="<li class='"+_+"' data-product-qty="+n+" data-product-price="+s+" data-product-id="+r+" data-hash-code="+p+"><i ' style='cursor: pointer;' aria-hidden='true'></i></div><div class='selected-box' ><img class='box-color' src='"+c+"'></div> ",u=!1;wp.hooks.applyFilters("doko_is_dynamic_screen",u,window.doko.current_page)&&(l+="<div class='doko-right-sup-exposant'>x</div>  <div class='doko-qty-exposant'>"+n+"</div>"),l+="</li>",o(t).append(l),o(t).find("li img").css("width","40px")}}function t(){var d={container:window.doko.box_container,contents:window.doko.box_contents,total_price:window.doko.total_price,card_details:window.doko.box_card,gift_message:window.doko.gift_messages};null!=window.doko.discounts_applied&&(d.discounts_applied=window.doko.discounts_applied),o.post(doko_object.ajaxurl,{action:"doko_wc_add_to_cart",contents:d,bundle_id:o("div[data-bundle-id]").data("bundleId")},(function(d){var t=JSON.parse(d);t.doko_is_added_to_cart?(o("div.doko-spinner-loading").hide(),o("div.doko-spinner-complete").show(),o("div.doko-is-complete").show()):(o("div.doko-spinner-loading").hide(),o("div.doko-spinner-error").show(),o("div.doko-is-complete").show(),o("button.doko-go-to-cart").hide()),o("div#build-complete").append(t.doko_html_response_adc)}))}o("div.doko-spinner-loading").show(),o("div.doko-spinner-complete").hide(),o("div.doko-is-complete").hide(),o("div.doko-spinner-error").hide(),wp.hooks.addFilter("doko_is_dynamic_screen","doko",(function(o,d){return parseInt(d)!=parseInt(1)}),10,2),wp.hooks.addAction("doko_after_calculate_add_to_box","doko",(function(o,d,t){var i=d.productName;let e=doko_object.product_is_added_to_box_message;e=e.replace("%s",i),Snackbar.show({actionText:"Close",pos:"bottom-center",duration:1e4,text:e})}),20,3),wp.hooks.addAction("doko_after_calculate_add_to_box","doko",(function(t,i,e){var a=i.productId,n=i.quantity,r=i.productPrice,s=i.unique_id,c=i.variation_id,p=i.options,_=i.options_is_checked,l=JSON.parse(doko_step_identifier);if(1==e){if(wp.hooks.applyFilters("doko_execute_rule_on_page",!0,e)&&null!=doko_bundle_data){var u=wp.hooks.applyFilters("doko_enable_first_page_redirect",doko_bundle_data["enable-screen-redirect"],e);window.doko.box_container={product_id:a,product_qty:n,product_price:r,unique_id:s,variation_id:c,options:p};let _=r;for(var k in p)null!=p[k].amount&&(_+=p[k].amount);window.doko.screens["first-step"]={product_id:a,qty:i.quantity,amount:wp.hooks.applyFilters("doko_bundle_product_price",_,t,i,e),options:p},d(i,w=o("ul.doko-box-container"),!0,!0),"yes"==u&&o('ul.doko-btn-navigation button.doko-page-btn[data-btn-type="next"]').trigger("click")}}else if(wp.hooks.applyFilters("doko_execute_rule_on_page",!0,e)){var w=o("ul.doko-box-contents");wp.hooks.applyFilters("doko_add_product_to_navigation",!0,e)&&d(i,w,!1,!0),_&&(a="p"+a);var h=l[e];if("no"==window.doko.cardMode){let o=r;for(var k in p)null!=p[k].amount&&(o+=p[k].amount);null==window.doko.screens[h]&&(window.doko.screens[h]={}),window.doko.screens[h].hasOwnProperty(a)||(window.doko.screens[h][a]={product_id:a,qty:0,amount:wp.hooks.applyFilters("doko_bundle_product_price",o,t,i,e),options:p}),window.doko.screens[h][a].qty+=n,window.doko.box_contents.hasOwnProperty(a)?window.doko.box_contents[a].product_qty+=n:window.doko.box_contents[a]={product_id:i.productId,product_qty:n,product_price:r,unique_id:s,variation_id:c,options:p}}}wp.hooks.doAction("doko_execute_rule",e,a,n,r,s,c,t,i)}),30,3),wp.hooks.addAction("doko_after_calculate_add_to_box","doko",(function(o,d,t){hs_dk_rebuild_total_modal()}),50,3),wp.hooks.addAction("doko_delete_product_from_box","doko",(function(d){o("div.hs-dk-bundle-page").filter(":visible").data().pageId>1&&delete window.doko.box_contents[d]})),wp.hooks.addAction("doko_after_delete_product_from_box","doko",(function(o){hs_dk_rebuild_total_modal()})),wp.hooks.addAction("doko_after_click_navigate_to_page","doko",(function(d){d==o("div.hs-dk-bundle-page").length&&t()})),window.hs_dk_add_li_to_box=d,window.hs_dk_add_to_cart_wc=t}))}(jQuery);